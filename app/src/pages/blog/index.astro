---
// src/pages/blog/index.astro
import { getCollection } from 'astro:content';
import MainLayout from '../../layouts/MainLayout.astro';
import BlogCard from '../../components/blog/BlogCard.astro';

// Fetch all blog posts from the 'blog' collection
const allPosts = await getCollection('blog');

// Sort posts by publication date, newest first
const sortedPosts = allPosts.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());

const pageTitle = "OrlaMarie Coach Blog";
const pageDescription = "Insights, tips, and resources on personal growth, career development, and achieving your goals.";
---

<MainLayout title={pageTitle} description={pageDescription}>
  <div class="container mx-auto px-4 py-8 lg:py-16">
    <header class="mb-8 lg:mb-12 text-center">
      <h1 class="text-3xl lg:text-4xl font-extrabold text-gray-900 dark:text-white mb-4">
        {pageTitle}
      </h1>
      <p class="text-lg font-light text-gray-500 dark:text-gray-400">
        {pageDescription}
      </p>
    </header>

    {sortedPosts.length > 0 ? (
      <div class="grid gap-8 md:grid-cols-2 lg:grid-cols-3">
        {sortedPosts.map((post) => (
          <BlogCard post={post} />
        ))}
      </div>
    ) : (
      <p class="text-center text-gray-500 dark:text-gray-400">
        No blog posts found yet. Check back soon!
      </p>
    )}

    {/* TODO: Add pagination if there are many posts */}
  </div>
</MainLayout>
