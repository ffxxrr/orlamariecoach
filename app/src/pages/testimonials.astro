---
import { getCollection } from 'astro:content';
import MainLayout from '../layouts/MainLayout.astro';
import TestimonialCard from '../components/testimonials/TestimonialCard.astro';

// Fetch all testimonials and sort them by the 'order' field
const testimonials = (await getCollection('testimonials'))
  .sort((a, b) => a.data.order - b.data.order);
---

<MainLayout title="Client Testimonials" description="Hear from clients who have benefited from OrlaMarie's coaching services.">
  <section class="bg-white dark:bg-gray-900 py-8 lg:py-16">
    <div class="container mx-auto px-4">
      <div class="max-w-screen-md mx-auto text-center mb-8 lg:mb-12">
        <h2 class="mb-4 text-4xl tracking-tight font-extrabold text-gray-900 dark:text-white">Client Success Stories</h2>
        <p class="font-light text-gray-500 sm:text-xl dark:text-gray-400">
          Discover how OrlaMarie's coaching has helped individuals achieve their personal and professional goals.
        </p>
      </div>

      {testimonials.length > 0 ? (
        <div class="grid gap-8 lg:grid-cols-1">
          {testimonials.map((testimonial) => (
            <TestimonialCard testimonial={testimonial} />
          ))}
        </div>
      ) : (
        <p class="text-center text-gray-500 dark:text-gray-400">No testimonials available yet.</p>
      )}
    </div>
  </section>
</MainLayout>
